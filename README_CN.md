# VLM ç‰©ä½“è¯†åˆ«ç³»ç»Ÿï¼ˆè¯­éŸ³ + å¤šæ¨¡å¼ï¼‰

ğŸ¤– ä¸€ä¸ªç»¼åˆæ€§çš„è§†è§‰è¯­è¨€æ¨¡å‹ï¼ˆVLMï¼‰ç³»ç»Ÿï¼Œç»“åˆäº†**è¯­éŸ³è¾“å…¥**ã€**æ–‡æœ¬è¾“å…¥**å’Œ**å¤šç§VLMå¤„ç†è·¯å¾„**ï¼Œå®ç°æ™ºèƒ½ç‰©ä½“è¯†åˆ«å’Œå®šä½ã€‚

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

### ğŸ¤ è¾“å…¥æ¨¡å¼
- **è¯­éŸ³è¾“å…¥**ï¼šç”¨ä¸­æ–‡æˆ–è‹±æ–‡è‡ªç„¶åœ°è¯´å‡ºæ‚¨çš„æŒ‡ä»¤
- **æ–‡æœ¬è¾“å…¥**ï¼šä¼ ç»Ÿé”®ç›˜è¾“å…¥ï¼Œæ”¯æŒå¤šè¯­è¨€
- **è‡ªåŠ¨å›é€€**ï¼šè¯­éŸ³è¯†åˆ«å¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ°æ–‡æœ¬è¾“å…¥

### ğŸ¤– VLM å¤„ç†é€‰é¡¹
- **äº‘ç«¯VLM (Grok-4)**ï¼šé€šè¿‡ X.AI API å®ç°é«˜ç²¾åº¦è¯†åˆ«
- **äº‘ç«¯VLM (Qwen-VL)**ï¼šé€šè¿‡ DashScope API æä¾›ä¼˜ç§€çš„ä¸­æ–‡æ”¯æŒ
- **æœ¬åœ°VLM (LLaVA)**ï¼šé€šè¿‡ Ollama å®ç°éšç§ä¿æŠ¤çš„æœ¬åœ°å¤„ç†

### ğŸŒ å¤šè¯­è¨€æ”¯æŒ
- **è‹±æ–‡æŒ‡ä»¤**ï¼š"please grab the apple to me"ã€"find the phone"
- **ä¸­æ–‡æŒ‡ä»¤**ï¼š"è¯·å¸®æˆ‘æ‹¿è‹¹æœ"ã€"æ‰¾æ‰‹æœºç»™æˆ‘"
- **æ··åˆè¯­è¨€**ï¼š"ç»™è¯·å¸®æˆ‘æ‹¿é›ªç¢§, i mean bring me sprite"
- **è‡ªåŠ¨ç¿»è¯‘**ï¼šä¸­æ–‡è¾“å…¥è‡ªåŠ¨ç¿»è¯‘ä¸ºè‹±æ–‡

### ğŸ¯ ç‰©ä½“è¯†åˆ«ä¸å®šä½
- ç²¾ç¡®çš„åæ ‡æ£€æµ‹ï¼Œå…·æœ‰ä¸­å¿ƒç‚¹ç²¾åº¦
- æ”¯æŒå¤šä¸ªç‰©ä½“å®ä¾‹
- ä½¿ç”¨æ˜Ÿå½¢æ ‡è®°è¿›è¡Œè§†è§‰æ³¨é‡Š
- é’ˆå¯¹ä¸åŒå›¾åƒåˆ†è¾¨ç‡çš„åæ ‡ç¼©æ”¾

### ğŸ”Š éŸ³é¢‘åé¦ˆ
- ä½¿ç”¨ macOS å†…ç½® `say` å‘½ä»¤è¿›è¡Œæ–‡æœ¬è½¬è¯­éŸ³
- ç®€æ´çš„éŸ³é¢‘æ‘˜è¦ï¼ˆ"æ‰¾åˆ°ç‰©ä½“" vs "æœªæ‰¾åˆ°ç‰©ä½“"ï¼‰
- TTS æ— éœ€äº’è”ç½‘è¿æ¥

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

```bash
# å®‰è£… Python ä¾èµ–
pip install SpeechRecognition pyaudio pillow gtts pygame requests openai

# macOS ç”¨æˆ·ï¼ˆå¦‚æœ pyaudio å®‰è£…å¤±è´¥ï¼‰
brew install portaudio
pip install pyaudio

# æœ¬åœ° VLM æ”¯æŒï¼ˆå¯é€‰ï¼‰
curl -fsSL https://ollama.com/install.sh | sh
ollama pull llava:latest
ollama serve
```

### ç¯å¢ƒè®¾ç½®

```bash
# è®¾ç½® API å¯†é’¥ï¼ˆæ ¹æ®æ‚¨åå¥½çš„ VLM é€‰æ‹©ï¼‰
export XAI_API_KEY="your_xai_api_key_here"          # ç”¨äº Grok-4
export DASHSCOPE_API_KEY="your_dashscope_key_here"  # ç”¨äº Qwen-VL
```

### åŸºæœ¬ç”¨æ³•

```bash
python imageRecogVLM.py
```

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### è¯­éŸ³è¾“å…¥ç¤ºä¾‹

**ä¸­æ–‡è¯­éŸ³æŒ‡ä»¤ï¼š**
- "è¯·å¸®æˆ‘æ‹¿è‹¹æœ"
- "æ‰¾æ‰‹æœºç»™æˆ‘"
- "ç»™æˆ‘æ‹¿å¯ä¹"
- "å¸®æˆ‘æ‰¾é’¥åŒ™"

**è‹±æ–‡è¯­éŸ³æŒ‡ä»¤ï¼š**
- "Please grab the apple to me"
- "Find me the phone"
- "Show me the bottle"
- "Locate the keys"

### æ–‡æœ¬è¾“å…¥ç¤ºä¾‹

**ä¸­æ–‡æ–‡æœ¬ï¼š**
```
ğŸ’¬ è¾“å…¥æ‚¨çš„æŒ‡ä»¤ï¼šè¯·å¸®æˆ‘æ‹¿è‹¹æœ
ğŸ’¬ è¾“å…¥æ‚¨çš„æŒ‡ä»¤ï¼šæ‰¾æ‰‹æœºç»™æˆ‘
```

**è‹±æ–‡æ–‡æœ¬ï¼š**
```
ğŸ’¬ Enter your command: please grab the apple to me
ğŸ’¬ Enter your command: find the phone
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```mermaid
graph TB
    A[ç”¨æˆ·è¾“å…¥] --> B{è¾“å…¥æ¨¡å¼}
    B -->|è¯­éŸ³| C[è¯­éŸ³è¯†åˆ«]
    B -->|æ–‡æœ¬| D[æ–‡æœ¬è¾“å…¥]
    C --> E[è¯­éŸ³è½¬æ–‡æœ¬]
    E --> F[è¯­è¨€æ£€æµ‹]
    D --> F
    F --> G{æ£€æµ‹åˆ°ä¸­æ–‡ï¼Ÿ}
    G -->|æ˜¯| H[ä¸­æ–‡åˆ°è‹±æ–‡ç¿»è¯‘]
    G -->|å¦| I[ç‰©ä½“æå–]
    H --> I
    I --> J{VLM é€‰æ‹©}
    J -->|äº‘ç«¯| K[Grok-4 API]
    J -->|äº‘ç«¯| L[Qwen-VL API]
    J -->|æœ¬åœ°| M[LLaVA via Ollama]
    K --> N[å“åº”å¤„ç†]
    L --> N
    M --> N
    N --> O[åæ ‡è§£æ]
    O --> P[å“åº”ç”Ÿæˆ]
    P --> Q[æ–‡æœ¬è½¬è¯­éŸ³]
    P --> R[è§†è§‰æ³¨é‡Š]
```

## ğŸ”§ é…ç½®

### è¯­éŸ³è¾“å…¥è®¾ç½®
- **è¶…æ—¶æ—¶é—´**ï¼šè¯­éŸ³æ£€æµ‹ 10 ç§’
- **çŸ­è¯­é™åˆ¶**ï¼šæœ€å¤§å½•éŸ³ 8 ç§’
- **è¯­è¨€**ï¼šè‹±è¯­ (en-US)ã€ä¸­æ–‡ (zh-CN)
- **å›é€€**ï¼šé€šè¿‡ CMU Sphinx è¿›è¡Œç¦»çº¿è¯†åˆ«

### VLM å¤„ç†é€‰é¡¹
- **Grok-4**ï¼šéœ€è¦ XAI_API_KEYï¼Œæœ€é«˜ç²¾åº¦
- **Qwen-VL**ï¼šéœ€è¦ DASHSCOPE_API_KEYï¼Œä¸­æ–‡æ”¯æŒä¼˜ç§€
- **LLaVA æœ¬åœ°**ï¼šéœ€è¦ Ollama + LLaVA æ¨¡å‹ï¼Œæ³¨é‡éšç§

### å›¾åƒå¤„ç†
- **åˆ†è¾¨ç‡**ï¼šé»˜è®¤ä½¿ç”¨åŸå§‹å›¾åƒåˆ†è¾¨ç‡
- **æ ¼å¼**ï¼šåŸå§‹åˆ†è¾¨ç‡ä¸‹çš„ JPEGï¼Œ95% è´¨é‡
- **æ³¨é‡Š**ï¼šæ£€æµ‹åˆ°çš„ç‰©ä½“ä½¿ç”¨é»„è‰²æ˜Ÿå½¢å’Œçº¢è‰²è½®å»“

## ğŸ“ é¡¹ç›®ç»“æ„

```
vlmTry/
â”œâ”€â”€ imageRecogVLM.py          # ä¸»åº”ç”¨ç¨‹åº
â”œâ”€â”€ sampleImages/             # æµ‹è¯•å›¾åƒç›®å½•
â”‚   â””â”€â”€ image_000777_rsz.jpg  # ç¤ºä¾‹å›¾åƒ
â”œâ”€â”€ README.md                 # è‹±æ–‡æ–‡æ¡£
â”œâ”€â”€ README_CN.md              # ä¸­æ–‡æ–‡æ¡£
â””â”€â”€ system_arch.mmd           # ç³»ç»Ÿæ¶æ„å›¾
```

## ğŸ› ï¸ API é›†æˆ

### Grok-4 (X.AI)
```python
# é«˜ç²¾åº¦äº‘ç«¯å¤„ç†
headers = {"Authorization": f"Bearer {XAI_API_KEY}"}
url = "https://api.x.ai/v1/chat/completions"
```

### Qwen-VL (DashScope)
```python
# ä¼˜ç§€çš„ä¸­æ–‡æ”¯æŒ
client = OpenAI(
    api_key=DASHSCOPE_API_KEY,
    base_url="https://dashscope.aliyuncs.com/compatible-mode/v1"
)
```

### LLaVA (æœ¬åœ°)
```python
# æ³¨é‡éšç§çš„æœ¬åœ°å¤„ç†
url = "http://localhost:11434/api/generate"
```

## ğŸ”Š è¯­éŸ³è¾“å…¥æŠ€æœ¯ç»†èŠ‚

### è¯­éŸ³è¯†åˆ«æµæ°´çº¿
1. **éº¦å…‹é£æ ¡å‡†**ï¼šè‡ªåŠ¨è°ƒèŠ‚ç¯å¢ƒå™ªéŸ³
2. **å¤šè¯­è¨€æ£€æµ‹**ï¼šå…ˆå°è¯•è‹±è¯­ï¼Œç„¶åä¸­æ–‡
3. **ç¦»çº¿å›é€€**ï¼šå¦‚æœæ— äº’è”ç½‘åˆ™ä½¿ç”¨ CMU Sphinx
4. **é”™è¯¯å¤„ç†**ï¼šä¼˜é›…åœ°å›é€€åˆ°æ–‡æœ¬è¾“å…¥

### æ”¯æŒçš„è¯­éŸ³æŒ‡ä»¤
- **æ‹¿å–æ¨¡å¼**ï¼š"å¸®æˆ‘æ‹¿[ç‰©ä½“]"
- **æŸ¥æ‰¾æ¨¡å¼**ï¼š"æ‰¾[ç‰©ä½“]ç»™æˆ‘"
- **æ˜¾ç¤ºæ¨¡å¼**ï¼š"ç»™æˆ‘çœ‹[ç‰©ä½“]"
- **å®šä½æ¨¡å¼**ï¼š"æ‰¾åˆ°[ç‰©ä½“]"

## ğŸŒ å¤šè¯­è¨€æ”¯æŒ

### ä¸­æ–‡ç¿»è¯‘æ¨¡å¼
```python
chinese_patterns = {
    r'è¯·.*?æ‹¿.*?ç»™æˆ‘': 'please grab {} to me',
    r'å¸®æˆ‘.*?æ‹¿.*': 'help me get {}',
    r'æ‰¾.*?ç»™æˆ‘': 'find {} for me',
    # ç‰©ä½“ç¿»è¯‘
    r'è‹¹æœ': 'apple',
    r'æ‰‹æœº|ç”µè¯': 'phone',
    r'å¯ä¹': 'coke',
    r'é›ªç¢§': 'sprite'
}
```

## ğŸ“Š å“åº”æ ¼å¼

### æ§åˆ¶å°è¾“å‡º
```
ğŸ¤– VLM ç‰©ä½“è¯†åˆ«ç³»ç»Ÿï¼ˆè¯­éŸ³ + å¤šæ¨¡å¼ï¼‰
ğŸ¤ è¾“å…¥æ¨¡å¼é€‰æ‹©
ğŸ’¬ æ”¶åˆ°æŒ‡ä»¤ï¼š'æ‰¾æ‰‹æœº'
ğŸ¯ è¯†åˆ«ç›®æ ‡ç‰©ä½“ï¼š'æ‰‹æœº'
ğŸš€ è°ƒç”¨ Grok-4 è§†è§‰ APIï¼ˆäº‘ç«¯ï¼‰...
ğŸ“Š åæ ‡æ‘˜è¦è¡¨ï¼š
| ç‰©ä½“ID | H (æ°´å¹³) | V (å‚ç›´) |
|--------|----------|----------|
|   1    |   320    |   240    |
```

### éŸ³é¢‘è¾“å‡º
- **æˆåŠŸ**ï¼š"æ‰¾åˆ°æ‰‹æœº"
- **å¤±è´¥**ï¼š"æœªæ‰¾åˆ°ç‰©ä½“"

## ğŸš€ æ€§èƒ½

### å¤„ç†æ—¶é—´ï¼ˆå…¸å‹ï¼‰
- **è¯­éŸ³è¯†åˆ«**ï¼š2-5 ç§’
- **Grok-4 API**ï¼š3-8 ç§’
- **Qwen-VL API**ï¼š2-6 ç§’
- **æœ¬åœ° LLaVA**ï¼š5-15 ç§’ï¼ˆå–å†³äºç¡¬ä»¶ï¼‰

### ç²¾åº¦æ¯”è¾ƒ
- **Grok-4**ï¼šæœ€é«˜ç²¾åº¦ï¼Œé€‚åˆå¤æ‚åœºæ™¯
- **Qwen-VL**ï¼šä¸­æ–‡ç‰©ä½“/æ–‡æœ¬è¯†åˆ«ä¼˜ç§€
- **LLaVA æœ¬åœ°**ï¼šè‰¯å¥½ç²¾åº¦ï¼Œæ³¨é‡éšç§

## ğŸ” æ•…éšœæ’é™¤

### è¯­éŸ³è¾“å…¥é—®é¢˜
```bash
# æ£€æŸ¥éº¦å…‹é£æƒé™
# macOSï¼šç³»ç»Ÿåå¥½è®¾ç½® > å®‰å…¨æ€§ä¸éšç§ > éº¦å…‹é£

# å®‰è£…/é‡æ–°å®‰è£…éŸ³é¢‘ä¾èµ–
brew install portaudio
pip install --upgrade pyaudio SpeechRecognition
```

### API é—®é¢˜
```bash
# éªŒè¯ API å¯†é’¥
echo $XAI_API_KEY
echo $DASHSCOPE_API_KEY

# æµ‹è¯•ç½‘ç»œè¿æ¥
curl -I https://api.x.ai
curl -I https://dashscope.aliyuncs.com
```

### æœ¬åœ° VLM é—®é¢˜
```bash
# æ£€æŸ¥ Ollama çŠ¶æ€
ollama list
ollama ps

# é‡å¯ Ollama æœåŠ¡
ollama serve

# å¦‚æœç¼ºå°‘ LLaVA æ¨¡å‹åˆ™æ‹‰å–
ollama pull llava:latest
```

## ğŸ¤ è´¡çŒ®

1. Fork æ­¤ä»“åº“
2. åˆ›å»ºæ‚¨çš„åŠŸèƒ½åˆ†æ”¯ï¼ˆ`git checkout -b feature/amazing-feature`ï¼‰
3. æäº¤æ‚¨çš„æ›´æ”¹ï¼ˆ`git commit -m 'Add amazing feature'`ï¼‰
4. æ¨é€åˆ°åˆ†æ”¯ï¼ˆ`git push origin feature/amazing-feature`ï¼‰
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æ­¤é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- **OpenAI** æä¾› GPT æ¨¡å‹å’Œ API æ ‡å‡†
- **X.AI** æä¾› Grok-4 è§†è§‰ API
- **é˜¿é‡Œå·´å·´** æä¾› Qwen-VL å’Œ DashScope API
- **Ollama** æä¾›æœ¬åœ° LLM åŸºç¡€è®¾æ–½
- **LLaVA** æä¾›å¼€æºè§†è§‰è¯­è¨€æ¨¡å‹
- **Google** æä¾›è¯­éŸ³è¯†åˆ« API
- **CMU Sphinx** æä¾›ç¦»çº¿è¯­éŸ³è¯†åˆ«
- **Apple** æä¾› macOS å†…ç½® TTS æ”¯æŒ
